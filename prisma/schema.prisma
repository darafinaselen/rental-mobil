// Prisma schema for rental-mobil app
// Default to SQLite for local dev. You can switch provider and DATABASE_URL later.

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

/// Example models â€” adjust to your needs
model User {
    id        Int       @id @default(autoincrement())
    email     String    @unique
    name      String?
    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt
    bookings  Booking[]
}

model Car {
    id             Int       @id @default(autoincrement())
    make           String
    model          String
    plateNumber    String    @unique
    // store money as integer cents
    dailyRateCents Int
    available      Boolean   @default(true)
    createdAt      DateTime  @default(now())
    updatedAt      DateTime  @updatedAt
    bookings       Booking[]
}

model Booking {
    id         Int      @id @default(autoincrement())
    userId     Int
    carId      Int
    startDate  DateTime
    endDate    DateTime
    // total price in integer cents
    totalCents Int
    // Use string status (simple and portable), default PENDING
    status     String   @default("PENDING")
    createdAt  DateTime @default(now())
    updatedAt  DateTime @updatedAt

    user User @relation(fields: [userId], references: [id], onDelete: Cascade)
    car  Car  @relation(fields: [carId], references: [id], onDelete: Cascade)

    @@index([userId])
    @@index([carId])
}
